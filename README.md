# project_30072025
k8s-cluster for mindbox


Описание проекта
Этот проект представляет собой конфигурацию для развертывания веб-приложения в Kubernetes-кластере с учетом требований:

- Отказоустойчивость (распределение по зонам и нодам)
- Эффективное использование ресурсов (масштабирование под нагрузкой, экономия ресурсов ночью)
- Учет особенностей приложения (медленный старт, высокое потребление CPU при инициализации, ровное потребление памяти)

Что сделано и почему
1. Deployment (deployment.yaml)
Цель: Обеспечить стабильную работу приложения с возможностью плавного обновления и распределением нагрузки.

Решения:
- 4 реплики – по результатам нагрузочного теста этого достаточно для пиковой нагрузки.
- PodAntiAffinity – поды распределяются по разным нодам, чтобы отказ одной ноды не убил всё приложение.
- Ресурсы:
requests.cpu: 200m – гарантированный минимум для комфортного старта.
limits.cpu: 500m – ограничение всплесков CPU при инициализации.
memory: 128Mi (фиксировано) – так как потребление памяти ровное.
- Readiness & Liveness Probes – с увеличенными таймаутами (initialDelaySeconds: 10-15), потому что приложение стартует 5-10 секунд.

2. Horizontal Pod Autoscaler (hpa.yaml)
Цель: Автоматически масштабировать приложение, чтобы ночью экономить ресурсы, а днем – выдерживать нагрузку.

Решения:
- minReplicas: 2 – даже ночью оставляем 2 пода для отказоустойчивости.
- maxReplicas: 4 – больше не нужно (по тестам 4 пода справляются с пиком).
- Масштабирование по CPU (60%) – баланс между экономией и запасом мощности.

3. Service (service.yaml)
Цель: Дать доступ к приложению внутри кластера.

Решения:
- ClusterIP – стандартный тип для внутреннего доступа.
- Порт 80 → 8080 – стандартное пробрасывание портов.
